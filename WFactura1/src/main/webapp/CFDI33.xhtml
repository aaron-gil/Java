<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>CFDI 3.3</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="webjars/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>
        <!--<script src="webjars/jquery/3.3.1/jquery.min.js"></script>-->
        <script src="webjars/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <style>
            .btn-link{
                text-decoration: none;
                color: white;
            }
            .card-header, .card-title{
                background: rgb(244,129,16) !important;

            }
            .btn-link:hover {
                color: rgb(251,201,151);
                text-decoration: none !important;
            }
            .card{
                border-radius: 10px 10px 0px 0px;

            }

        </style>
    </h:head>
    <h:body>
        <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                        template="template/plantilla.xhtml">
            <ui:define name="menuP"></ui:define>
            <ui:define name="contenido"></ui:define>
            <ui:define name="contenidoFull">
                <p:messages id="messages" showDetail="true" closable="true">
                    <p:autoUpdate />
                </p:messages>
                <h:form id="formcfdi33">
                    <div class="accordion texto13" id="cfdi33">
                        <div class="card">
                            <div class="card-header" id="emisor">
                                <h2 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#emisorM" aria-expanded="true" aria-controls="emisorM">
                                        Emisor
                                    </button>
                                </h2>
                            </div>

                            <div id="emisorM" class="collapse show" aria-labelledby="emisor" data-parent="#cfdi33">
                                <div class="card-body">
                                    <div class="container-fluid">
                                        <p:outputPanel id="emisorPanel">
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*RFC:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.usuarioSeleccionado.nombre}" />
                                                </div>                                                
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Razon Social:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.usuarioSeleccionado.nombreCompleto}" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Fecha:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.fechaActual}" />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Lugar de expedición:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.usuarioSeleccionado.cp}" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Regimen fiscal:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.usuarioSeleccionado.regimenFiscal}" />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Tipo de documento:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.tipoComp}" >
                                                        <f:selectItem itemValue="" itemLabel="Seleccionar" />
                                                        <f:selectItems value="#{cfdi33V.listaTiposComprobante}" var="td" itemValue="#{td.identifica}" itemLabel="#{td.nombre}"/>
                                                        <p:ajax update="emisorPanel" listener="#{cfdi33V.seriesSelc}"></p:ajax>
                                                    </p:selectOneMenu>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Serie:" rendered="#{cfdi33V.renderSerie}" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.serieS}"  rendered="#{cfdi33V.renderSerie}">
                                                        <f:selectItem itemValue="" itemLabel="Seleccionar" />
                                                        <f:selectItems value="#{cfdi33V.seriesSeleccionadas}" var="s" itemValue="#{s.identifica}" itemLabel="#{s.nombre}"/>
                                                        <p:ajax update="emisorPanel" listener="#{cfdi33V.folioSiguiente()}"></p:ajax>
                                                    </p:selectOneMenu>
                                                </div>                                                
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Folio:" rendered="#{cfdi33V.renderSerie}" />
                                                </div>
                                                <div class="col-md-2 text-left" id="folio">
                                                    <h:outputText value="#{cfdi33V.nextFolio}" rendered="#{cfdi33V.renderSerie}"/>
                                                </div>
                                            </div>
                                        </p:outputPanel>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card" >
                            <div class="card-header" id="relacionados">
                                <p:outputPanel id="uuidRB">
                                    <h6 class="mb-0">
                                        <button class="btn btn-link collapsed" id="focus"  type="button" data-toggle="collapse" 
                                                data-target="#relacionadosM" aria-expanded="false" aria-controls="relacionadosM" title="Opcional Para agregar UUID relacionado">
                                            UUID Relacionados 
                                        </button>                                   
                                    </h6>
                                </p:outputPanel>
                                <p:tooltip id="toolTipGrow" for="uuidRB" value="Nodo OPCIONAL para agregar UUID's relacionados."
                                           position="top"/>
                            </div>
                            <!--<p:tooltip id="toolTipFocus" for="relacionados" showEffect="clip" hideEffect="explode" position="left" />-->
                            <div id="relacionadosM" class="collapse" aria-labelledby="relacionados" data-parent="#cfdi33">
                                <div class="card-body">
                                    <div class="container-fluid">
                                        <p:outputPanel id="uuidRelacionado">        
                                            <p:outputPanel id="relacion">
                                                <div class="row">
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="*Tipo Relación" />
                                                    </div>
                                                    <div class="col-md-2">
                                                        <p:selectOneMenu id="somTipoRelacion" value="#{cfdi33V.tipoRelacionS}" autoWidth="false" style="width: 150px" disabled="#{cfdi33V.relacionSelect}">
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar" ></f:selectItem>
                                                            <f:selectItems value="#{cfdi33V.listaTiposRelacion}" var="t" itemValue="#{t.identifica}" itemLabel="#{t.descripcion}" ></f:selectItems>
                                                            <p:ajax event="change" listener="#{cfdi33V.tipoRel}" />
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="col-md-1 text-right">
                                                        <h:outputText value="*UUID"/>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p:inputMask id="uiii" size="40" value="#{cfdi33V.uuidRela}" mask="********-****-****-****-************">  <!--[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}-->
                                                            <p:ajax event="blur" listener="#{cfdi33V.verif()}" update="uiii" />
                                                        </p:inputMask>
                                                        <!--<p:inputText  id="uiii" value="" maxlength="36" size="40" validatorMessage="Debe cumplir con el formato UUID">
                                                            <f:validateRegex pattern="^([0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12})$"/>
                                                            <p:ajax event="keyup" listener="#{cfdi33V.verif()}" update="uiii" />
                                                            
                                                        </p:inputText >-->
                                                    </div>
                                                    <div class="col-md-1">
                                                        <h:commandButton value="Agregar">
                                                            <p:ajax listener="#{cfdi33V.agregarRelacionado}" update="formcfdi33:relacion formcfdi33:dtUUIDRel"/>
                                                        </h:commandButton>
                                                    </div>
                                                </div>                                        
                                            </p:outputPanel>
                                            <br/>
                                            <p:outputPanel id="dtUUIDRel" >
                                                <p:dataTable rendered="#{cfdi33V.relacionTable}" value="#{cfdi33V.uuidRelacionados}"  var="c"
                                                             scrollable="true"  scrollHeight="250px" emptyMessage="No hay UUID's Relacionados">
                                                    <p:column headerText="UUID" >
                                                        <h:outputText value="#{c}" />
                                                    </p:column>
                                                    <p:column headerText="Eliminar" style="text-align: right">
                                                        <h:commandButton value = "Eliminar" >
                                                            <p:ajax listener="#{cfdi33V.eliminarRelacionado(c)}" update=":formcfdi33:uuidRelacionado"/>
                                                        </h:commandButton>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:outputPanel>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="card">
                            <div class="card-header" id="receptor">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#receptorM" aria-expanded="false" aria-controls="receptorM">
                                        Receptor
                                    </button>
                                </h2>
                            </div>
                            <div id="receptorM" class="collapse" aria-labelledby="receptor" data-parent="#cfdi33">
                                <div class="card-body">
                                    <div class="container-fluid">
                                        <p:outputPanel id="receptorPanel">
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Buscar RFC receptor:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:autoComplete id="clie" value="#{cfdi33V.cliente}" completeMethod="#{cfdi33V.completeCliente}"
                                                                    var="cli" itemValue="#{cli}" itemLabel="#{cli.rfc}"  converter="clienteConverter" forceSelection="true" >
                                                        <p:column>
                                                            <h:outputText value="#{cli.rfc}" />
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{cli.razonSocial}" />
                                                        </p:column>
                                                        <p:ajax event="itemSelect" update="receptorPanel"></p:ajax>
                                                    </p:autoComplete>
                                                </div>                                            
                                            </div>
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Cliente:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.cliente.nombre}" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*RFC: " />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.cliente.rfc}" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Razon Social:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.cliente.razonSocial}" />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Uso CFDI:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:autoComplete id="uso" value="#{cfdi33V.usoCfdiBean}" completeMethod="#{cfdi33V.completeUso}"
                                                                    var="us" itemValue="#{us}" itemLabel="#{us.descripcion}"  converter="usoCfdiConverter" forceSelection="true" >
                                                        <p:column>
                                                            <h:outputText value="#{us.identifica}" />
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{us.descripcion}" />
                                                        </p:column>
                                                        <p:ajax event="itemSelect" update="formcfdi33:receptorPanel"></p:ajax>
                                                    </p:autoComplete>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Recidencia fiscal: " />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:outputText value="#{cfdi33V.cliente.cp}" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Número de registro:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:inputText  value="#{cfdi33V.numRegIdTrib}" />
                                                </div>
                                            </div>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="pago">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#pagoM" aria-expanded="false" aria-controls="pagoM">
                                        Forma de pago
                                    </button>
                                </h2>
                            </div>
                            <div id="pagoM" class="collapse" aria-labelledby="pago" data-parent="#cfdi33">
                                <div class="card-body">
                                    <div class="container-fluid">
                                        <p:outputPanel id="pagoPanel">
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Moneda:" />
                                                </div>
                                                <div class="col-md-1 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.monedaS}">
                                                        <f:selectItem itemValue="MXN" itemLabel="MXN" />
                                                        <f:selectItems	value="#{cfdi33V.listaMonedas}" var="m" itemValue="#{m.identifica}" itemLabel="#{m.identifica}"></f:selectItems>  4
                                                        <p:ajax event="itemSelect" listener="#{cfdi33V.monedaM}" />
                                                    </p:selectOneMenu>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Forma de Pago: " />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.formaPagoS}" disabled="false">
                                                        <f:selectItem itemValue="" itemLabel="Seleccionar una opción"></f:selectItem>
                                                        <f:selectItems value="#{cfdi33V.listaFormasPago}" var="m" itemValue="#{m.identifica}" itemLabel="#{m.descripcion}"></f:selectItems>
                                                        <p:ajax event="itemSelect" listener="#{cfdi33V.formPag}" />
                                                    </p:selectOneMenu>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Método de Pago: " />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.metodoPagoS}">
                                                        <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                        <f:selectItems value="#{cfdi33V.listaMetodosPago}" var="m" itemValue="#{m.identifica}" itemLabel="#{m.descripcion}"></f:selectItems>
                                                        <p:ajax event="itemSelect" listener="#{cfdi33V.metodoP}"/>
                                                    </p:selectOneMenu>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 text-right">
                                                    <h:outputText value=" &ensp;" />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="*Tipo de cambio:" />
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:inputNumber value="#{cfdi33V.tipoCambio}" decimalPlaces="6" />
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Condiciones de pago:" />
                                                </div>
                                                <div class="col-md-2 text-left ">
                                                    <h:inputText value="#{cfdi33V.condicionesPago}">
                                                        <p:ajax event="blur" listener="#{cfdi33V.condicionesP()}" />
                                                    </h:inputText>
                                                </div>
                                            </div>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="conc">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#concM" aria-expanded="false" aria-controls="concM">
                                        Conceptos
                                    </button>
                                </h2>
                            </div>
                            <div id="concM" class="collapse" aria-labelledby="conc" data-parent="#cfdi33">
                                <div class="card-body">
                                    <p:outputPanel id="conceptosPanel">
                                        <div class="row">                                        
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="Buscar producto: " />

                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <p:autoComplete id="producto" value="#{cfdi33V.producto}" completeMethod="#{cfdi33V.completeProducto}"
                                                                        var="p" itemValue="#{p}" itemLabel="#{p.descripcion}"  converter="productoConverter" forceSelection="true" >
                                                            <p:column>
                                                                <h:outputText value="#{p.codigoSat}" />
                                                            </p:column>
                                                            <p:column>
                                                                <h:outputText value="#{p.descripcion}" />
                                                            </p:column>
                                                            <p:ajax event="itemSelect" update="conceptosPanel" listener="#{cfdi33V.habilitarInputs}"></p:ajax>
                                                        </p:autoComplete>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Claveproducto/servicio: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.codigoSat}" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="Descripción: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.descripcion}" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Clave unidad: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.medida.identifica}" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="Descripción:" />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.medida.nombre}" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="No. Predial: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.numeroPredial}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="No. Identificador: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.producto.numeroIdentificador}" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Cantidad: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:inputText value="#{cfdi33V.cantidad}" readonly="#{cfdi33V.inputCon}">
                                                            <p:ajax event="keyup" update="conceptosPanel" listener="#{cfdi33V.cantidadXvalor}" />
                                                        </h:inputText>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Valor unitario: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:inputText value="#{cfdi33V.producto.valorUnitario}" readonly="#{cfdi33V.inputCon}">
                                                            <f:convertNumber groupingUsed="true"  maxFractionDigits="6" type="currency" locale="es_MX" />
                                                            <p:ajax event="blur" update="conceptosPanel" listener="#{cfdi33V.cantidadXvalor}" />
                                                        </h:inputText>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Importe: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.importe}">
                                                            <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="6" type="currency" locale="es_MX" />
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="Porcentaje descuento: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:inputText value="#{cfdi33V.porcentajeDes}" readonly="#{cfdi33V.inputCon}">
                                                            <p:ajax event="keyup" update="conceptosPanel" listener="#{cfdi33V.descuentoProd}" />
                                                        </h:inputText>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="Descuento: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:outputText value="#{cfdi33V.descuento}">
                                                            <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="6" type="currency" locale="es_MX" />
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <!--<div class="row">
                                                    <div class="col-md-6 text-right">
                                                        <h:outputText value="*Descripcion: " />
                                                    </div>
                                                    <div class="col-md-6 text-left">
                                                        <h:inputTextarea style="width: 150px; height: 175px"  />
                                                    </div>
                                                </div>-->
                                            </div>                                        
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 text-left">
                                                <p:selectBooleanCheckbox itemLabel="Impuestos Retenidos" value="#{cfdi33V.checkRetenidos}"  rendered="#{cfdi33V.activChecksImp}">  
                                                    <p:ajax update=":formcfdi33:panelReten" listener="#{cfdi33V.agregarVRetenciones()}" />
                                                </p:selectBooleanCheckbox>                                                
                                            </div>
                                        </div>

                                        <p:outputPanel id="panelReten">
                                            <p:outputPanel style="border-style: dashed; border-color: rgb(244,129,16); padding: 5px; margin-bottom: 7px;" rendered="#{cfdi33V.checkRetenidos}" >
                                                <div class="row" >
                                                    <div class="col-md-1 text-right">
                                                        <h:outputText value="Base: " rendered="#{cfdi33V.checkRetenidos}" />
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <h:inputText value="#{cfdi33V.baseR}" rendered="#{cfdi33V.checkRetenidos}" />
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Impuesto:  " rendered="#{cfdi33V.checkRetenidos}"/>
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu value="#{cfdi33V.ivaR}" disabled="false" rendered="#{cfdi33V.checkRetenidos}" >
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItem itemValue="iva" itemLabel="IVA"></f:selectItem>
                                                            <f:selectItem itemValue="ieps" itemLabel="IEPS"></f:selectItem>
                                                            <f:selectItem itemValue="isr" itemLabel="ISR"></f:selectItem>
                                                            <p:ajax event="itemSelect" update="formcfdi33:tipFR" listener="#{cfdi33V.activTipFacRet}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Tipo Factor:  " rendered="#{cfdi33V.checkRetenidos}" />
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu id="tipFR" value="#{cfdi33V.tipoFactorR}" rendered="#{cfdi33V.checkRetenidos}" disabled="#{cfdi33V.tipoFactorRActiv}">
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItems value="#{cfdi33V.tipoFactorRL}" var="tf" itemLabel="#{tf}" itemValue="#{tf}" />
                                                            <p:ajax event="itemSelect" update="formcfdi33:tasCR" listener="#{cfdi33V.tasaOCuotaRetList}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div>                                             
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Tasa o Cuota:  " rendered="#{cfdi33V.checkRetenidos}"/>
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu id="tasCR" value="#{cfdi33V.tasaOCuotaR}" rendered="#{cfdi33V.checkRetenidos}" disabled="#{cfdi33V.tipoTasaOCRActiv}">
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItems value="#{cfdi33V.listTCReten}"/>
                                                            <p:ajax event="itemSelect" update=":formcfdi33:panelReten" listener="#{cfdi33V.calcularImpuestosRetenidos}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div> 
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Importe:  " rendered="#{cfdi33V.checkRetenidos}"/>
                                                    </div>
                                                    <div class="col-md-1 text-left">
                                                        <h:outputText id="impotR" value="#{cfdi33V.importeR}" rendered="#{cfdi33V.checkRetenidos}" >
                                                            <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="6" type="currency" locale="es_MX" />
                                                        </h:outputText>
                                                    </div> 
                                                    <div class="col-md-5 text-right">
                                                        <h:commandButton value="Agregar Retenido" rendered="#{cfdi33V.btnAgrRet}" >
                                                            <p:ajax listener="#{cfdi33V.agregarImpRete}" update="formcfdi33:impRetenidosTable formcfdi33:panelReten" ></p:ajax>
                                                        </h:commandButton>
                                                    </div>
                                                </div>
                                                <p:outputPanel id="impRetenidosPanel" style="margin-top: 5px">
                                                    <p:dataTable var="impRet" value="#{cfdi33V.listRete}" id="impRetenidosTable" rendered="#{cfdi33V.impRetPan}">
                                                        <p:column headerText="Base" class="texto13">
                                                            <h:outputText value="#{impRet.base}" />
                                                        </p:column>
                                                        <p:column headerText="Impuesto" class="texto13">
                                                            <h:outputText value="#{impRet.iva}" />
                                                        </p:column>
                                                        <p:column headerText="T Factor" class="texto13">
                                                            <h:outputText value="#{impRet.tipoFactor}" />
                                                        </p:column>
                                                        <p:column headerText="TasaOCuota" class="texto13">
                                                            <h:outputText value="#{impRet.tasaOCuota}" />
                                                        </p:column>
                                                        <p:column headerText="Importe" class="texto13">
                                                            <h:outputText value="#{impRet.importe}" />
                                                        </p:column>
                                                        <p:column headerText="Opción" class="texto13">
                                                            <div class="text-right">
                                                                <h:commandButton value="Eliminar">
                                                                    <p:ajax listener="#{cfdi33V.eliminarImpRet(impRet)}" update="formcfdi33:impRetenidosTable formcfdi33:impRetenidosPanel" ></p:ajax>
                                                                </h:commandButton>
                                                            </div>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:outputPanel>
                                            </p:outputPanel>
                                        </p:outputPanel>
                                        <div class="row">
                                            <div class="col-md-12 text-left">
                                                <p:selectBooleanCheckbox itemLabel="Impuestos Trasladados" value="#{cfdi33V.checktrasladados}" rendered="#{cfdi33V.activChecksImp}">
                                                    <p:ajax update=":formcfdi33:panelTrasl" listener="#{cfdi33V.agregarVTrasladados()}" />
                                                </p:selectBooleanCheckbox>
                                            </div>
                                        </div>
                                        <p:outputPanel id="panelTrasl">
                                            <p:outputPanel style="border-style: dashed; border-color: rgb(244,129,16); padding: 5px; margin-bottom: 7px;" rendered="#{cfdi33V.checktrasladados}" >
                                                <div class="row" >
                                                    <div class="col-md-1 text-right">
                                                        <h:outputText value="Base: " rendered="#{cfdi33V.checktrasladados}" />
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <h:inputText value="#{cfdi33V.baseT}" rendered="#{cfdi33V.checktrasladados}" />
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Impuesto:  " rendered="#{cfdi33V.checktrasladados}"/>
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu value="#{cfdi33V.ivaT}" disabled="false" rendered="#{cfdi33V.checktrasladados}" >
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItem itemValue="iva" itemLabel="IVA"></f:selectItem>
                                                            <f:selectItem itemValue="ieps" itemLabel="IEPS"></f:selectItem>
                                                            <p:ajax event="itemSelect" update="formcfdi33:tipFT" listener="#{cfdi33V.activTipFacTra}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Tipo Factor:  " rendered="#{cfdi33V.checktrasladados}" />
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu id="tipFT" value="#{cfdi33V.tipoFactorT}" rendered="#{cfdi33V.checktrasladados}" disabled="#{cfdi33V.tipoFactorTActiv}">
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItems value="#{cfdi33V.tipoFactorTL}" var="tf" itemLabel="#{tf}" itemValue="#{tf}" />
                                                            <p:ajax event="itemSelect" update="formcfdi33:tasCT" listener="#{cfdi33V.tasaOCuotaTraList}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div>                                             
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Tasa o Cuota:  " rendered="#{cfdi33V.checktrasladados}"/>
                                                    </div>
                                                    <div class="col-md-2 text-left">
                                                        <p:selectOneMenu id="tasCT" value="#{cfdi33V.tasaOCuotaT}" rendered="#{cfdi33V.checktrasladados}" disabled="#{cfdi33V.tipoTasaOCTActiv}">
                                                            <f:selectItem itemValue="" itemLabel="Seleccionar"></f:selectItem>
                                                            <f:selectItems value="#{cfdi33V.listTCTras}"/>
                                                            <p:ajax event="itemSelect" update=":formcfdi33:panelTrasl" listener="#{cfdi33V.calcularImpuestosTrasladados}"></p:ajax>
                                                        </p:selectOneMenu>
                                                    </div> 
                                                    <div class="col-md-2 text-right">
                                                        <h:outputText value="Importe:  " rendered="#{cfdi33V.checktrasladados}"/>
                                                    </div>
                                                    <div class="col-md-1 text-left">
                                                        <h:outputText id="impotT" value="#{cfdi33V.importeT}" rendered="#{cfdi33V.checktrasladados}" >
                                                            <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="6" type="currency" locale="es_MX" />
                                                        </h:outputText>
                                                    </div> 
                                                    <div class="col-md-5 text-right">
                                                        <h:commandButton value="Agregar Traslado" rendered="#{cfdi33V.btnAgrTra}" >
                                                            <p:ajax listener="#{cfdi33V.agregarImpTras}" update="formcfdi33:impTrasladadosTable formcfdi33:panelTrasl" ></p:ajax>
                                                        </h:commandButton>
                                                    </div>
                                                </div>
                                                <p:outputPanel id="impTrasladadosPanel" >
                                                    <p:dataTable var="impTras" value="#{cfdi33V.listTras}" id="impTrasladadosTable" rendered="#{cfdi33V.impTraPan}">
                                                        <p:column headerText="Base" class="texto13">
                                                            <h:outputText value="#{impTras.base}" />
                                                        </p:column>
                                                        <p:column headerText="Impuesto" class="texto13">
                                                            <h:outputText value="#{impTras.iva}" />
                                                        </p:column>                                                    
                                                        <p:column headerText="T Factor" class="texto13">
                                                            <h:outputText value="#{impTras.tipoFactor}" />
                                                        </p:column>
                                                        <p:column headerText="TasaOCuota" class="texto13">
                                                            <h:outputText value="#{impTras.tasaOCuota}" />
                                                        </p:column>
                                                        <p:column headerText="Importe" class="texto13">
                                                            <h:outputText value="#{impTras.importe}" />
                                                        </p:column>
                                                        <p:column headerText="Opción" class="texto13" >
                                                            <div class="text-right">
                                                                <h:commandButton value="Eliminar">
                                                                    <p:ajax listener="#{cfdi33V.eliminarImpTra(impTras)}" update="formcfdi33:impTrasladadosTable formcfdi33:impTrasladadosPanel" ></p:ajax>
                                                                </h:commandButton>
                                                            </div>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:outputPanel>
                                            </p:outputPanel>
                                        </p:outputPanel>
                                        <div class="row">
                                            <div class="col-md-5 text-right">
                                                <h:outputText value="" />
                                            </div>
                                            <div class="col-md-7 text-right">
                                                <h:commandButton value="Agregar Concepto" disabled="#{cfdi33V.btnAgrCon}">
                                                    <p:ajax listener="#{cfdi33V.agregarConcepto}" update="formcfdi33:listaConceptosPanel formcfdi33:listaConceptosTable formcfdi33:conceptosPanel formcfdi33:totalPanel"></p:ajax>
                                                </h:commandButton>
                                            </div>
                                        </div>
                                    </p:outputPanel>
                                    <p:outputPanel id="listaConceptosPanel" style="margin-top: 20px">
                                        <p:outputPanel style="border-style: dashed; border-color: rgb(244,129,16); padding: 5px; margin-bottom: 7px;" rendered="#{cfdi33V.conceptosTableActv}" >

                                            <p:dataTable var="conc" value="#{cfdi33V.conceptos}" id="listaConceptosTable" rendered="#{cfdi33V.conceptosTableActv}">
                                                <f:facet name="header">
                                                    <h:outputText value="Conceptos agregados"/>
                                                </f:facet>
                                                <p:column headerText="Cod. SAT" class="texto13">
                                                    <h:outputText value="#{conc.producto.codigoSat}" />
                                                </p:column>
                                                <p:column headerText="Producto" class="texto13">
                                                    <h:outputText value="#{conc.producto.descripcion}" />
                                                </p:column>
                                                <p:column headerText="Cantidad" class="texto13">
                                                    <h:outputText value="#{conc.cantidad}" />
                                                </p:column>
                                                <p:column headerText="Descuento" class="texto13">
                                                    <h:outputText value="#{conc.descuento}" >
                                                        <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Importe" class="texto13">
                                                    <h:outputText value="#{conc.importe}" >
                                                        <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Eliminar" class="texto13">
                                                    <h:commandButton value="Eliminar" >
                                                        <p:ajax listener="#{cfdi33V.eliminarConcepto(conc)}" update="formcfdi33:listaConceptosPanel formcfdi33:listaConceptosTable formcfdi33:totalPanel"></p:ajax>
                                                    </h:commandButton>
                                                </p:column>
                                            </p:dataTable>
                                        </p:outputPanel>
                                    </p:outputPanel>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="sep">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#sepM" aria-expanded="false" aria-controls="sepM">
                                        Complemento SEP
                                    </button>
                                </h2>
                            </div>
                            <div id="sepM" class="collapse" aria-labelledby="sep" data-parent="#cfdi33">
                                <div class="card-body">
                                    <p:outputPanel id="sepPanel">
                                        <p:outputPanel>
                                            <div class="row">
                                                <div class="col-md-1 text-right">
                                                    <h:outputText value="CURP"/>
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:inputText value="#{cfdi33V.CURP}" maxlength="18">
                                                        <p:ajax event="keyup" update="formcfdi33:sepPanel" listener="#{cfdi33V.activarAlum}"  />
                                                    </p:inputText>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Nombre Alumno" rendered="#{cfdi33V.renderAlu}"/>
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:inputText value="#{cfdi33V.alumno}" rendered="#{cfdi33V.renderAlu}">
                                                        <p:ajax event="keyup" update="formcfdi33:sepPanel" listener="#{cfdi33V.activarRfc}" />
                                                    </h:inputText>
                                                </div>
                                                <div class="col-md-1 text-right">
                                                    <h:outputText value="RFC" rendered="#{cfdi33V.renderRfc}"/>
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:inputText value="#{cfdi33V.RFCAl}" rendered="#{cfdi33V.renderRfc}" maxlength="13">
                                                        <p:ajax event="keyup" update="formcfdi33:sepPanel" listener="#{cfdi33V.activarAutRVOE}" />
                                                    </h:inputText>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-1 text-right">
                                                    <h:outputText value="autRVOE" rendered="#{cfdi33V.renderAut}"/>
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <h:inputText value="#{cfdi33V.autRVOE}" rendered="#{cfdi33V.renderAut}">
                                                        <p:ajax event="keyup" update="formcfdi33:sepPanel" listener="#{cfdi33V.activarNEduc}" />
                                                    </h:inputText>
                                                </div>
                                                <div class="col-md-2 text-right">
                                                    <h:outputText value="Nivel Educativo" rendered="#{cfdi33V.renderNEdu}"/>
                                                </div>
                                                <div class="col-md-2 text-left">
                                                    <p:selectOneMenu value="#{cfdi33V.nivelEduc}" rendered="#{cfdi33V.renderNEdu}">
                                                        <f:selectItem itemLabel="Seleccione" itemValue="" noSelectionOption="true" />
                                                        <f:selectItem itemLabel="Preescolar" itemValue="Preescolar" />
                                                        <f:selectItem itemLabel="Primaria" itemValue="Primaria" />
                                                        <f:selectItem itemLabel="Secundaria" itemValue="Secundaria" />
                                                        <f:selectItem itemLabel="Profesional tecnico" itemValue="Profesional tecnico" />
                                                        <f:selectItem itemLabel="Bachillerato o su equivalente" itemValue="Bachillerato o su equivalente" />
                                                        <p:ajax event="itemSelect" update="formcfdi33:sepPanel" />
                                                    </p:selectOneMenu>
                                                </div>                                       
                                            </div>
                                        </p:outputPanel>
                                    </p:outputPanel>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="CIL">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#CILM" aria-expanded="false" aria-controls="CILM">
                                        Complemento Impuestos Locales
                                    </button>
                                </h2>
                            </div>
                            <div id="CILM" class="collapse" aria-labelledby="CIL" data-parent="#cfdi33">
                                <div class="card-body">
                                    <p:outputPanel id="CILPanel">
                                        Retenciones Locales
                                        <p:outputPanel id="CILPanelR" style="border-style: dashed; border-color: rgb(244,129,16); padding: 5px; margin-bottom: 7px;">
                                            <div class="row">
                                                <div class="col-md-4 text-left">
                                                    <h:outputText value="*Descripción"/>                                       
                                                    <p:inputText value="#{cfdi33V.decripCompImpLocRet}" >
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCRT}" />
                                                    </p:inputText>
                                                </div> 
                                                <div class="col-md-3 text-left">
                                                    <h:outputText value="*%TASA" rendered="#{cfdi33V.renderILCRT}"/>                                                
                                                    <p:inputNumber value="#{cfdi33V.tasaCompImpLocRet}" style="max-width:50px !important" rendered="#{cfdi33V.renderILCRT}"  maxValue="200" decimalPlaces="0">
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCRI}" />
                                                    </p:inputNumber>
                                                </div> 
                                                <div class="col-md-3 text-left">
                                                    <h:outputText value="*Importe" rendered="#{cfdi33V.renderILCRI}"/>
                                                    <p:inputNumber value="#{cfdi33V.importeCompImpLocRet}" style="width:100px" rendered="#{cfdi33V.renderILCRI}" decimalPlaces="6">
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCRB}" />
                                                    </p:inputNumber>
                                                </div> 
                                                <div class="col-md-2 text-right">
                                                    <h:commandButton value="Agregar"  rendered="#{cfdi33V.renderILCRB}" >
                                                        <p:ajax update="formcfdi33:CILPanel formcfdi33:CILTableR formcfdi33:totalPanel" listener="#{cfdi33V.agregarILCR()}"></p:ajax>
                                                    </h:commandButton>
                                                </div> 
                                            </div>
                                            <p:outputPanel id="CILTableR">
                                                <p:dataTable var="ILRT" value="#{cfdi33V.listILCR}" id="listaCILTRTable" rendered="#{cfdi33V.renderILCRTable}">
                                                    <f:facet name="header">
                                                        <h:outputText value="Impuestos agregados"/>
                                                    </f:facet>
                                                    <p:column headerText="Descripción" class="texto13">
                                                        <h:outputText value="#{ILRT.descripcion}" />
                                                    </p:column>
                                                    <p:column headerText="Tasa" class="texto13">
                                                        <h:outputText value="#{ILRT.porcentaje}" />
                                                    </p:column>
                                                    <p:column headerText="Importe" class="texto13">
                                                        <h:outputText value="#{ILRT.importe}" />
                                                    </p:column>
                                                    <p:column headerText="Opción" class="texto13">
                                                        <h:commandButton value="Eliminar" >
                                                            <p:ajax update="formcfdi33:CILPanel formcfdi33:CILTableR formcfdi33:totalPanel" listener="#{cfdi33V.eliminarILCR(ILRT)}"></p:ajax>
                                                        </h:commandButton>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:outputPanel>
                                        </p:outputPanel>
                                        Trasladados Locales
                                        <p:outputPanel id="CILPanelT" style="border-style: dashed; border-color: rgb(244,129,16); padding: 5px; margin-bottom: 7px;">
                                            <div class="row">
                                                <div class="col-md-4 text-left">
                                                    <h:outputText value="*Descripción"/>                                       
                                                    <p:inputText value="#{cfdi33V.decripCompImpLocTra}" >
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCTT}" />
                                                    </p:inputText>
                                                </div> 
                                                <div class="col-md-3 text-left">
                                                    <h:outputText value="*%TASA" rendered="#{cfdi33V.renderILCTT}"/>                                                
                                                    <p:inputNumber value="#{cfdi33V.tasaCompImpLocTra}" style="max-width:50px !important" rendered="#{cfdi33V.renderILCTT}"  maxValue="200" decimalPlaces="0">
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCTI}" />
                                                    </p:inputNumber>
                                                </div> 
                                                <div class="col-md-3 text-left">
                                                    <h:outputText value="*Importe" rendered="#{cfdi33V.renderILCTI}"/>
                                                    <p:inputNumber value="#{cfdi33V.importeCompImpLocTra}" style="width:100px" rendered="#{cfdi33V.renderILCTI}" decimalPlaces="6">
                                                        <p:ajax event="keyup" update="formcfdi33:CILPanel" listener="#{cfdi33V.habilitarRenderILCTB}" />
                                                    </p:inputNumber>
                                                </div> 
                                                <div class="col-md-2 text-right">
                                                    <h:commandButton value="Agregar"  rendered="#{cfdi33V.renderILCTB}" >
                                                        <p:ajax update="formcfdi33:CILPanel formcfdi33:CILTableT formcfdi33:totalPanel" listener="#{cfdi33V.agregarILCT()}"></p:ajax>
                                                    </h:commandButton>
                                                </div> 
                                            </div>
                                            <p:outputPanel id="CILTableT">
                                                <p:dataTable var="ILRT" value="#{cfdi33V.listILCT}" id="listaCILTTTable" rendered="#{cfdi33V.renderILCTTable}">
                                                    <f:facet name="header">
                                                        <h:outputText value="Impuestos agregados"/>
                                                    </f:facet>
                                                    <p:column headerText="Descripción" class="texto13">
                                                        <h:outputText value="#{ILRT.descripcion}" />
                                                    </p:column>
                                                    <p:column headerText="Tasa" class="texto13">
                                                        <h:outputText value="#{ILRT.porcentaje}" />
                                                    </p:column>
                                                    <p:column headerText="Importe" class="texto13">
                                                        <h:outputText value="#{ILRT.importe}" />
                                                    </p:column>
                                                    <p:column headerText="Opción" class="texto13">
                                                        <h:commandButton value="Eliminar" >
                                                            <p:ajax update="formcfdi33:CILPanel formcfdi33:CILTableT formcfdi33:totalPanel" listener="#{cfdi33V.eliminarILCT(ILRT)}"></p:ajax>
                                                        </h:commandButton>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:outputPanel>
                                        </p:outputPanel>
                                    </p:outputPanel>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="total">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#totalM" aria-expanded="false" aria-controls="totalM">
                                        Total
                                    </button>
                                </h2>
                            </div>
                            <div id="totalM" class="collapse" aria-labelledby="total" data-parent="#cfdi33">
                                <div class="card-body">
                                    <p:outputPanel id="totalPanel">
                                        <div class="row">
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="Importe con letra:" />
                                            </div>
                                            <div class="col-md-7 text-left">
                                                <h:outputText value="#{cfdi33V.totalFacturaEnLetras}" />
                                            </div>

                                            <div class="col-md-3 text-left">
                                                <!--<h:selectOneRadio>
                                                    <f:selectItem itemLabel="PDF Español"/>
                                                    <f:selectItem itemLabel="PDF Inglés"/>
                                                </h:selectOneRadio>-->
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="*Subtotal:" />
                                            </div>
                                            <div class="col-md-2 text-left">
                                                <h:outputText value="#{cfdi33V.subTotal}">
                                                    <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                </h:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="Descuento total:" />
                                            </div>
                                            <div class="col-md-2 text-left">
                                                <h:outputText value="#{cfdi33V.descuentoTotal}">
                                                    <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                </h:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="Trasladados:" />
                                            </div>
                                            <div class="col-md-2 text-left">
                                                <h:outputText value="#{cfdi33V.totalTrasl}">
                                                    <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                </h:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="Retenidos:" />
                                            </div>
                                            <div class="col-md-2 text-left">
                                                <h:outputText value="#{cfdi33V.totalReten}">
                                                    <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                </h:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-2 text-right">
                                                <h:outputText value="*Total:" />
                                            </div>
                                            <div class="col-md-2 text-left">
                                                <h:outputText value="#{cfdi33V.total}">
                                                    <f:convertNumber currencySymbol="$" groupingUsed="true"  maxFractionDigits="2" type="currency" locale="es_MX" />
                                                </h:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8"></div>
                                            <div class="col-md-4 text-right">
                                                <h:commandButton value="Vista previa"/>
                                                <h:commandButton value="Guardar prefactura" >
                                                    <p:ajax listener="#{cfdi33V.validarCamposCFDI}" />
                                                </h:commandButton>
                                                <h:commandButton value="Emitir CFDI"/>
                                            </div>
                                        </div>
                                    </p:outputPanel>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </ui:define>
        </ui:composition>
    </h:body>
</html>



